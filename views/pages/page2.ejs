<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
</head>
<body>
    <header>
        <h1>Taskly - Gerenciar Tarefas</h1>
        <nav>
            <a href="/">Dashboard</a>
            <a href="/manage">Gerenciar Tarefas</a>
        </nav>
    </header>

    <main>
        <section>
            <h2>Criar Nova Tarefa</h2>
            <form action="/api/tasks" method="POST">
                <div>
                    <label for="title">Título:</label>
                    <input type="text" id="title" name="title" required>
                </div>

                <div>
                    <label for="description">Descrição:</label>
                    <textarea id="description" name="description" rows="4"></textarea>
                </div>

                <div>
                    <label for="user_id">Usuário:</label>
                    <select id="user_id" name="user_id">
                        <option value="">Selecione um usuário</option>
                        <% users.forEach(user => { %>
                        <option value="<%= user.id %>"><%= user.name %></option>
                        <% }); %>
                    </select>
                </div>

                <div>
                    <label for="category_id">Categoria:</label>
                    <select id="category_id" name="category_id">
                        <option value="">Selecione uma categoria</option>
                        <% categories.forEach(category => { %>
                        <option value="<%= category.id %>"><%= category.name %></option>
                        <% }); %>
                    </select>
                </div>

                <div>
                    <label for="status">Status:</label>
                    <select id="status" name="status" required>
                        <option value="pendente">Pendente</option>
                        <option value="em_andamento">Em Andamento</option>
                        <option value="concluida">Concluída</option>
                    </select>
                </div>

                <div>
                    <label for="due_date">Data de Vencimento:</label>
                    <input type="date" id="due_date" name="due_date">
                </div>

                <button type="submit">Criar Tarefa</button>
            </form>
        </section>

        <section>
            <h2>Criar Novo Usuário</h2>
            <form action="/api/users" method="POST">
                <div>
                    <label for="user_name">Nome:</label>
                    <input type="text" id="user_name" name="name" required>
                </div>

                <div>
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" required>
                </div>

                <div>
                    <label for="password">Senha:</label>
                    <input type="password" id="password" name="password" required>
                </div>

                <button type="submit">Criar Usuário</button>
            </form>
        </section>

        <section>
            <h2>Criar Nova Categoria</h2>
            <form action="/api/categories" method="POST">
                <div>
                    <label for="category_name">Nome da Categoria:</label>
                    <input type="text" id="category_name" name="name" required>
                </div>

                <div>
                    <label for="category_description">Descrição:</label>
                    <textarea id="category_description" name="description" rows="3"></textarea>
                </div>

                <button type="submit">Criar Categoria</button>
            </form>
        </section>

        <section>
            <h2>Ações Rápidas</h2>
            <div>
                <h3>Links para API</h3>
                <ul>
                    <li><a href="/api/tasks" target="_blank">Ver Todas as Tarefas (JSON)</a></li>
                    <li><a href="/api/users" target="_blank">Ver Todos os Usuários (JSON)</a></li>
                    <li><a href="/api/categories" target="_blank">Ver Todas as Categorias (JSON)</a></li>
                </ul>
            </div>
        </section>

        <% if (typeof error !== 'undefined') { %>
            <div style="color: red;">
                <p>Erro: <%= error %></p>
            </div>
        <% } %>
    </main>

    <footer>
        <p>Taskly - Sistema de Gerenciamento de Tarefas</p>
    </footer>
</body>
</html>